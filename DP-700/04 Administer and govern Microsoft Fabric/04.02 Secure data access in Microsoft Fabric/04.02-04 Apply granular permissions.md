
เมื่อสิทธิ์ที่กำหนดผ่าน _workspace roles_ หรือ _item permissions_ ไม่เพียงพอ คุณสามารถใช้สิทธิ์แบบละเอียด (_granular permissions_) เช่น การกำหนดสิทธิ์ระดับตาราง, แถว, ไฟล์ หรือโฟลเดอร์ ผ่านช่องทางต่าง ๆ ได้แก่:

- _SQL analytics endpoint_
- _OneLake data access roles_ (เวอร์ชัน *preview*)
- _Warehouse_
- _Semantic model_

## Configure data access through the SQL analytics endpoint in a lakehouse

ข้อมูลใน _lakehouse_ สามารถอ่านได้ผ่าน _SQL analytics endpoint_ ซึ่งแต่ละ _lakehouse_ จะมี _SQL analytics endpoint_ ที่สร้างอัตโนมัติ เพื่อสลับมุมมองระหว่าง _lake_ (รองรับงาน data engineering และ Apache Spark) และ _SQL_ (รองรับ SQL security และ object-level permissions)

โครงสร้างโฟลเดอร์ของข้อมูลใน _lakehouse_ จะมีลักษณะดังนี้:

- `/Files`
- `/Tables`

### View the SQL analytics endpoint view of the lakehouse

ใช้ _SQL analytics endpoint_ เพื่ออ่านข้อมูลในโฟลเดอร์ `/Tables` โดยใช้ T-SQL

[![Screenshot of SQL analytics endpoint view.](https://learn.microsoft.com/en-us/training/wwl-data-ai/secure-data-access-in-fabric/media/analytics-endpoint.png)](https://learn.microsoft.com/en-us/training/wwl-data-ai/secure-data-access-in-fabric/media/analytics-endpoint.png#lightbox)

### Apply granular permissions to the lakehouse using T-SQL

สามารถใช้คำสั่ง *DCL (Data Control Language)* กับ SQL objects เพื่อกำหนดสิทธิ์แบบละเอียดผ่าน _SQL analytics endpoint_ ได้ เช่น:

- [`GRANT`](https://learn.microsoft.com/en-us/sql/t-sql/statements/grant-transact-sql)
- [`DENY`](https://learn.microsoft.com/en-us/sql/t-sql/statements/deny-transact-sql)
- [`REVOKE`](https://learn.microsoft.com/en-us/sql/t-sql/statements/revoke-database-permissions-transact-sql)

สามารถกำหนด _row-level security_, _column-level security_ และ _dynamic data masking_ ได้เช่นกัน:

- [Row-level security](https://learn.microsoft.com/en-us/fabric/data-warehouse/row-level-security)
- [Column-level security](https://learn.microsoft.com/en-us/fabric/data-warehouse/column-level-security)
- [Dynamic data masking](https://learn.microsoft.com/en-us/fabric/data-warehouse/dynamic-data-masking)

## Configure data access through the lake view of the lakehouse

มุมมองแบบ _lake_ ใช้สำหรับการเข้าถึงข้อมูลในโฟลเดอร์ `/Tables` และ `/Files`

[![Screenshot of files in lakehouse.](https://learn.microsoft.com/en-us/training/wwl-data-ai/secure-data-access-in-fabric/media/lakehouse-files.png)](https://learn.microsoft.com/en-us/training/wwl-data-ai/secure-data-access-in-fabric/media/lakehouse-files.png#lightbox)

### Use OneLake data access roles to secure data

*Workspace และ item permissions* จะควบคุมสิทธิ์เข้าถึงข้อมูลในระดับกว้าง แต่ถ้าต้องการควบคุมละเอียดกว่านั้น เช่น ระดับโฟลเดอร์ใน _lake view_ ของ _lakehouse_ สามารถใช้ _OneLake data access roles_ ได้ (เวอร์ชัน *preview*)

คุณสามารถสร้าง _custom role_ แล้วมอบสิทธิ์อ่านเฉพาะบางโฟลเดอร์ใน OneLake ได้ โดยสิทธิ์จะถ่ายทอดลงไปยังโฟลเดอร์ย่อยด้วย

ขั้นตอน:

1. เลือก **Manage OneLake data access (preview)** จากเมนูใน lake view  
   [![Screenshot of OneLake data access button.](https://learn.microsoft.com/en-us/training/wwl-data-ai/secure-data-access-in-fabric/media/manage-onelake-data-access.png)](https://learn.microsoft.com/en-us/training/wwl-data-ai/secure-data-access-in-fabric/media/manage-onelake-data-access.png#lightbox)

2. สร้างชื่อ role ใหม่ในหน้าต่าง **New Role** และเลือกโฟลเดอร์ที่ต้องการให้เข้าถึง

3. เมื่อสร้าง role แล้ว ให้มอบหมายผู้ใช้หรือกลุ่ม และเลือกสิทธิ์ที่ต้องการ

_Tip_: อ่านเพิ่มเติมเกี่ยวกับวิธีที่ OneLake RBAC ทำงานร่วมกับ Fabric permissions ได้ที่:  
[How OneLake RBAC permissions are evaluated with Fabric permissions](https://learn.microsoft.com/en-us/fabric/onelake/security/data-access-control-model#how-onelake-rbac-permissions-are-evaluated-with-fabric-permissions?azure-portal=true)

### Configure granular warehouse permissions

สามารถกำหนดสิทธิ์ละเอียดกับ _warehouse_ ได้ผ่าน _SQL analytics endpoint_ เช่นเดียวกับ _lakehouse_ โดยใช้คำสั่ง `GRANT`, `REVOKE`, `DENY` และการกำหนด _row-level security_, _column-level security_, และ _dynamic data masking_

[![Screenshot of warehouse granular permissions.](https://learn.microsoft.com/en-us/training/wwl-data-ai/secure-data-access-in-fabric/media/warehouse-granular-permissions.png)](https://learn.microsoft.com/en-us/training/wwl-data-ai/secure-data-access-in-fabric/media/warehouse-granular-permissions.png#lightbox)

## Configure Semantic model permissions

สิทธิ์ในการเข้าถึง *semantic models* ภายใน workspace จะถูกกำหนดโดยอัตโนมัติจากบทบาท (_role_) ของผู้ใช้ใน workspace นั้น โดยทั่วไปแล้ว เมื่อผู้ใช้ได้รับบทบาทใน workspace ก็จะสามารถเข้าถึง *semantic models* ทั้งหมดใน workspace ได้

*Semantic models* สามารถกำหนดนโยบาย *security* โดยใช้ภาษา *DAX* และหากต้องการควบคุมสิทธิ์ให้ละเอียดมากขึ้น สามารถใช้ *Row-level security (RLS)* เพื่อจำกัดการเข้าถึงข้อมูลตามแถว

เรียนรู้เพิ่มเติมเกี่ยวกับการจัดการ *RLS* หรือสิทธิ์ของ *semantic models* ได้ที่:

- [Semantic model permissions](https://learn.microsoft.com/en-us/power-bi/connect-data/service-datasets-permissions)
- [Row-level security (RLS) with Power BI](https://learn.microsoft.com/en-us/fabric/security/service-admin-row-level-security)