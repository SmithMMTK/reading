
ใน _Microsoft Fabric_ คุณสามารถสร้าง _Dataflow Gen2_ ได้จาก _Data Factory workload_, _Power BI workspace_ หรือจะสร้างโดยตรงจาก _lakehouse_ ก็ได้ ในกรณีของเราที่เน้นไปที่การนำเข้าข้อมูล เราจะมาดูประสบการณ์ใช้งานในบริบทของ **Data Factory** โดย _Dataflows Gen2_ ใช้ _Power Query Online_ เพื่อแสดงภาพของกระบวนการแปลงข้อมูล ดูภาพรวมของอินเทอร์เฟซได้ดังนี้:

![Screenshot of the Power Query Online interface.](https://learn.microsoft.com/en-us/training/wwl/use-dataflow-gen-2-fabric/media/power-query-online-overview.png)

### 1. Power Query ribbon

_Dataflows Gen2_ รองรับการเชื่อมต่อกับแหล่งข้อมูลหลากหลายประเภท เช่น ฐานข้อมูลแบบ _cloud_ หรือ _on-premises_, ไฟล์ _Excel_ หรือ _flat files_, _SharePoint_, _SalesForce_, _Spark_, และ _Fabric lakehouses_ นอกจากนี้ยังสามารถดำเนินการแปลงข้อมูลได้หลากหลาย เช่น:

- กรองและเรียงลำดับแถว
- เปลี่ยนรูปแบบข้อมูลแบบ _Pivot_ และ _Unpivot_
- รวมและต่อ _queries_
- แยกคอลัมน์ และแยกแบบมีเงื่อนไข
- แทนค่าข้อมูล และลบค่าซ้ำ
- เพิ่ม, เปลี่ยนชื่อ, เรียงลำดับใหม่, หรือลบคอลัมน์
- คำนวณอันดับและเปอร์เซ็นต์
- เลือกเฉพาะ _Top N_ หรือ _Bottom N_

คุณยังสามารถสร้างและจัดการการเชื่อมต่อกับแหล่งข้อมูล, จัดการ _parameters_, และตั้งค่าปลายทางของข้อมูลเริ่มต้นได้จาก _ribbon_ นี้

### 2. Queries pane

ในส่วนของ _Queries pane_ จะแสดงแหล่งข้อมูลต่าง ๆ ซึ่งเรียกว่า _queries_ ซึ่งเมื่อโหลดเข้าสู่แหล่งจัดเก็บข้อมูลแล้วจะกลายเป็น _tables_ คุณสามารถทำสำเนาหรืออ้างอิง _query_ ได้หากต้องการใช้ข้อมูลเดิมในหลายรูปแบบ เช่น การสร้าง _star schema_ และแยกข้อมูลออกเป็นตารางย่อยเฉพาะเรื่อง นอกจากนี้ยังสามารถปิดการโหลด _query_ ได้ หากต้องการใช้งานเพียงครั้งเดียว

### 3. Diagram view

_Diagram View_ ช่วยให้คุณเห็นภาพรวมของการเชื่อมโยงระหว่างแหล่งข้อมูล และขั้นตอนการแปลงที่เกิดขึ้น เช่น _dataflow_ ของคุณเชื่อมต่อกับแหล่งข้อมูลหนึ่ง ทำการทำสำเนา _query_, ลบคอลัมน์บางส่วนจากต้นฉบับ แล้วทำ _unpivot_ กับสำเนา แต่ละ _query_ จะแสดงเป็นรูปทรงพร้อมรายการแปลงที่ทำไว้ และเชื่อมโยงกันด้วยเส้น คุณสามารถเปิดหรือปิด _view_ นี้ได้

### 4. Data Preview pane

_Data Preview pane_ จะแสดงตัวอย่างข้อมูลบางส่วน เพื่อให้คุณเห็นผลของการแปลงข้อมูล และสามารถโต้ตอบกับหน้าต่างแสดงตัวอย่างนี้ได้ เช่น ลากและวางคอลัมน์เพื่อจัดลำดับใหม่ หรือคลิกขวาที่คอลัมน์เพื่อกรองหรือปรับเปลี่ยนข้อมูล ทั้งนี้การแสดงผลจะแสดงทุกขั้นตอนการแปลงของ _query_ ที่เลือกอยู่

### 5. Query Settings pane

_Query Settings pane_ จะแสดง **Applied Steps** ซึ่งคือรายการขั้นตอนการแปลงข้อมูลที่ถูกนำมาใช้ แต่ละขั้นตอนจะแสดงเป็นรายการ และบางขั้นตอนอาจถูกเพิ่มเข้ามาโดยอัตโนมัติเมื่อเชื่อมต่อแหล่งข้อมูล ในแต่ละขั้นตอนมักมีไอคอนเฟืองเพื่อให้คุณปรับเปลี่ยนการตั้งค่าได้ หรือไม่เช่นนั้นคุณต้องลบแล้วเพิ่มใหม่

นอกจากนี้ยังสามารถคลิกขวาเพื่อเปิดเมนูเพิ่มเติมในแต่ละขั้นตอน เช่น เปลี่ยนชื่อ จัดเรียงใหม่ หรือลบออก คุณยังสามารถดูคำสั่งของแหล่งข้อมูล (_query folding_) ได้หากแหล่งข้อมูลนั้นรองรับ

แม้อินเทอร์เฟซนี้จะเป็นแบบภาพ (_visual_) แต่คุณสามารถดู _M code_ ได้ผ่าน **Advanced editor**

![Screenshot of the advanced editor with sample code](https://learn.microsoft.com/en-us/training/wwl/use-dataflow-gen-2-fabric/media/power-query-advanced-editor.png)

ใน _Query settings pane_ จะมีตัวเลือก **Data Destination** เพื่อกำหนดให้ข้อมูลของคุณไปยังหนึ่งในปลายทางภายใน _Fabric_ ได้ เช่น:

- _Lakehouse_
- _Warehouse_
- _SQL database_

คุณยังสามารถโหลด _dataflow_ ไปยัง _Azure SQL database_, _Azure Data Explorer_, หรือ _Azure Synapse Analytics_ ได้อีกด้วย

_Dataflows Gen2_ เป็นโซลูชันแบบ _low-to-no-code_ สำหรับการนำเข้า แปลง และโหลดข้อมูลไปยัง _Fabric data stores_ ซึ่ง _Power BI developers_ ที่คุ้นเคยอยู่แล้วสามารถเริ่มต้นใช้งานเพื่อแปลงข้อมูลตั้งแต่ต้นทาง เพื่อปรับปรุงประสิทธิภาพของรายงานได้อย่างรวดเร็ว

**Note**

สำหรับข้อมูลเพิ่มเติม ดูที่เอกสาร [Power Query](https://learn.microsoft.com/en-us/power-query/) เพื่อเพิ่มประสิทธิภาพในการใช้งาน _dataflows_