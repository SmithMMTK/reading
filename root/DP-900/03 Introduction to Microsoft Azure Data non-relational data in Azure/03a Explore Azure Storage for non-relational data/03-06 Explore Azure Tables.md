
_Azure Table Storage_ เป็นโซลูชันการเก็บข้อมูลแบบ _NoSQL_ ที่ใช้โครงสร้างแบบ _table_ โดยข้อมูลจะถูกเก็บในรูปแบบของ _key/value_

แต่ละรายการข้อมูล (_item_) จะอยู่ในรูปแบบ _row_ ซึ่งมีหลาย _columns_ สำหรับเก็บ _data fields_ ที่ต้องการจัดเก็บ 

![Diagram of an Azure storage account with Azure tables.](https://learn.microsoft.com/en-us/training/wwl-data-ai/explore-provision-deploy-non-relational-data-services-azure/media/azure-tables.png)


แต่อย่าเข้าใจผิดว่า _Azure Table Storage_ จะเหมือนกับ _table_ ใน _relational database_ เพราะจริง ๆ แล้ว _Azure Table_ ถูกออกแบบมาเพื่อเก็บข้อมูลแบบ _semi-structured_

แต่ละแถว (_row_) ต้องมี _key_ ที่ไม่ซ้ำกัน ซึ่งประกอบด้วย _partition key_ และ _row key_ และทุกครั้งที่มีการแก้ไขข้อมูล จะมีคอลัมน์ _timestamp_ บันทึกวันและเวลาที่มีการแก้ไข แต่สิ่งสำคัญคือ คอลัมน์อื่น ๆ ในแต่ละแถวสามารถไม่เหมือนกันก็ได้

_Azure Table Storage_ ไม่มีแนวคิดของ _foreign key_, _relationship_, _stored procedure_, _views_ หรือวัตถุอื่น ๆ ที่พบได้ใน _relational database_

ข้อมูลใน _Azure Table_ มักจะอยู่ในรูปแบบที่ไม่ _normalized_ โดยในหนึ่งแถวจะเก็บข้อมูลทั้งหมดของ _logical entity_ เช่น ถ้ามีตารางเก็บข้อมูลลูกค้า ข้อมูลในแต่ละแถวอาจรวมถึง _ชื่อ_, _นามสกุล_, _เบอร์โทรศัพท์หลายเบอร์_, และ _ที่อยู่หลายแห่ง_ ได้ โดยจำนวนฟิลด์ในแต่ละแถวอาจไม่เท่ากัน ขึ้นอยู่กับจำนวนเบอร์โทรและที่อยู่ของลูกค้านั้น ๆ

หากใช้ _relational database_ ข้อมูลนี้จะต้องแยกออกเป็นหลายแถวและหลายตาราง แต่ใน _Azure Table Storage_ สามารถเก็บรวมในแถวเดียวได้เลย


เพื่อให้เข้าถึงข้อมูลได้รวดเร็ว _Azure Table Storage_ จะทำการแบ่ง _table_ ออกเป็นหลาย _partitions_ โดยใช้กลไกที่เรียกว่า _partitioning_ ซึ่งเป็นการจัดกลุ่มของ _rows_ ที่มีคุณสมบัติร่วมกันผ่าน _partition key_ เดียวกัน แถวที่มี _partition key_ เดียวกันจะถูกจัดเก็บอยู่ใกล้กัน

การแบ่ง _partition_ ไม่เพียงแค่ช่วยจัดระเบียบข้อมูล แต่ยังช่วยเพิ่ม _scalability_ และ _performance_ ได้ดังนี้:

- _Partitions_ ทำงานแยกจากกันอย่างอิสระ และสามารถขยายหรือลดขนาดได้ตามจำนวนแถวที่เพิ่มหรือลดลงในแต่ละ partition โดย _table_ หนึ่งสามารถมีได้ไม่จำกัดจำนวน _partitions_

- เมื่อมีการค้นหาข้อมูล คุณสามารถระบุ _partition key_ ในเงื่อนไขการค้นหาเพื่อจำกัดขอบเขตของข้อมูลที่ต้องตรวจสอบ ช่วยลดปริมาณ _I/O_ (_reads_ และ _writes_) ที่ต้องใช้ในการค้นหา และช่วยให้ _performance_ ดีขึ้นอย่างชัดเจน

คีย์ใน _Azure Table Storage_ ประกอบด้วย 2 ส่วน ได้แก่ _partition key_ ซึ่งใช้ระบุว่าแถวนั้นอยู่ใน _partition_ ไหน และ _row key_ ซึ่งต้องไม่ซ้ำกันภายใน _partition_ เดียวกัน

ข้อมูลที่อยู่ใน _partition_ เดียวกันจะถูกจัดเรียงตามลำดับของ _row key_ เสมอ เมื่อแอปพลิเคชันเพิ่มข้อมูลใหม่เข้าไป Azure จะจัดวางแถวนั้นให้อยู่ในตำแหน่งที่ถูกต้องโดยอัตโนมัติ

โครงสร้างนี้ช่วยให้สามารถทำ _point queries_ ได้รวดเร็ว (คือการระบุ _partition key_ และ _row key_ เพื่อดึงข้อมูลแถวเดียว) และยังรองรับ _range queries_ เพื่อดึงข้อมูลหลายแถวที่เรียงต่อกันภายใน _partition_ เดียวได้อย่างมีประสิทธิภาพ

